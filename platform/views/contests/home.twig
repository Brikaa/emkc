{% extends 'master.twig'%}
{% block content %}
    <div class="em_common_content em_contests_home container">
        <div class="row">
            <div class="col-12">
                <h4 class="f300">Contests</h4>

                <p>
                    The Engineer Man Knowledge Center hosts contests periodically which are done in a Code Golf format.
                    For those not familiar with Code Golf, it basically means that the winner of the contest is the person
                    who can accomplish the given objective with the least amount of code, measured in characters.
                </p>

                <h5 class="f300">Global Rules</h5>

                <ol>
                    <li>
                        No sharing solutions during the contest period.
                    </li>
                    <li>
                        Contests start at 12:00pm CDT (5:00pm UTC) on Sundays and run for 5.5 days ending at
                        12:00am CDT (5:00am UTC) on the following Friday.
                    </li>
                    <li>
                        You can update your solution as many times as you want during the contest period. Submitting a solution
                        that is shorter than your last submitted solution will result in the submitted time changed.
                    </li>
                    <li>
                        Points are awarded to the shortest solutions that meet the objective. If there
                        are solutions that are the same length, the solution submitted the earliest will take precedent.
                        This is a WiP, actual points and awards will be determined later.
                    </li>
                    <li>
                        Submitted solutions must pass automated code execution before they are recorded as a contest submission.
                        This is done using the Piston engine. The only supported languages are the languages that Piston supports.
                        To request new languages, submit a request in #emkc-felix-pison on <a href="https://discord.gg/engineerman">Discord</a>.
                    </li>
                    <li>
                        Leading and trailing whitespace is automatically trimmed before calculating the number of characters used.
                    </li>
                </ol>

                <hr />

                <div class="active">
                    <h4 class="f300">Active Contests</h4>
                    {% for contest in active_contests %}
                        <a href="{{ contest.url }}" class="contest">
                            <div class="name">{{ contest.name }}</div>
                            <p>
                                Code Golf style contest. Click for more info or to submit solutions.
                            </p>
                            <div class="time_left">
                                Active Dates: {{ contest.start_date|date('F j, Y') }} - {{ contest.end_date|date('F j, Y') }}
                                ({{ contest.time_left }} left)
                            </div>
                            <div class="solutions">
                                Total Solutions: {{ contest.submissions|length }}
                                <div>
                                    {% for submission in contest.submissions %}
                                        <img src="{{ req.local.constant.cdn_url ~ submission.user.avatar_url }}" />
                                    {% endfor %}
                                </div>
                            </div>
                        </a>
                    {% else %}
                        There are no active contests at this time.
                    {% endif %}
                </div>

                <div class="past">
                    <h4 class="f300">Past Contests</h4>
                    {% for contest in past_contests %}
                        <a href="{{ contest.url }}" class="contest">
                            <div class="name">{{ contest.name }}</div>
                            <p>
                                Code Golf style contest. Click to view solutions.
                            </p>
                            <div class="time_left">
                                Active Dates: {{ contest.start_date|date('F j, Y') }} - {{ contest.end_date|date('F j, Y') }}
                                (Finished)
                            </div>
                            <div class="solutions">
                                Total Solutions: {{ contest.submissions|length }}
                                <div>
                                    {% for submission in contest.submissions %}
                                        <img src="{{ req.local.constant.cdn_url ~ submission.user.avatar_url }}" />
                                    {% endfor %}
                                </div>
                            </div>
                        </a>
                    {% else %}
                        There are no pasts contests at this time.
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
